<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pantaleon · Extracción de Jugo</title>
  <style>
    :root{
      --brand:#f26a21; /* naranja Pantaleon */
      --brand-dark:#c44f11;
      --ink:#0a0a0a;
      --muted:#6b7280;
      --bg:#f5f7f6;
      --card:#ffffff;
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    .shell{max-width:1200px;margin:24px auto;padding:0 16px}
    .header{background:var(--card);border-radius:var(--radius);box-shadow:0 6px 20px rgba(0,0,0,.06);padding:14px 18px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px}
    .logo{display:flex;align-items:center;gap:10px}
    .area{justify-self:center;text-align:center}
    .area small{display:block;color:var(--muted);font-weight:500;margin-top:2px}
    .meta{justify-self:end;text-align:right}
    .meta .clock{font-variant-numeric:tabular-nums; font-weight:600}
    .meta .date{color:var(--muted);font-size:12px}
    .details{margin-top:8px;text-align:center;color:var(--muted);font-size:14px}
    .toolbar{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap}
    .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;background:var(--brand);color:#fff;font-weight:600;cursor:pointer;transition:.15s transform ease,.2s box-shadow ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(10,123,62,.25)}
    .btn.secondary{background:#e9f6ef;color:var(--brand);} 
    .card{margin-top:16px;background:var(--card);border-radius:var(--radius);box-shadow:0 6px 20px rgba(0,0,0,.05);padding:18px}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    @media (max-width: 768px){
      .header{grid-template-columns:1fr; text-align:center}
      .meta{justify-self:center}
      .area{justify-self:center}
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- Encabezado principal -->
    <header class="header" role="banner">
      <div class="logo" aria-label="Pantaleon">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAt8AAAI3CAYAAABDHTcrAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADs..." alt="Pantaleon" style="height:40px;width:auto;display:block" />
      </div>

      <div class="area">
        <div style="font-weight:700">Extracción de Jugo</div>
        <small>Área</small>
      </div>

      <div class="meta">
        <div class="clock" id="clock">--:--:--</div>
        <div class="date" id="date">Cargando fecha…</div>
        <div class="resp" style="margin-top:6px;font-size:12px;color:var(--muted)">Responsable: <strong id="responsable">(definir)</strong></div>
      </div>
    </header>

    <!-- Detalles del ingenio y ubicación -->
    <div class="details">
      Ingenio <span id="ingenio">Pantaleon</span> · Ubicación: <span id="ubicacion">Guatemala</span>
    </div>

    <!-- Acciones rápidas opcionales -->
    <div class="toolbar" role="group" aria-label="Acciones rápidas">
      <button class="btn" id="btn-imprimir">Imprimir</button>
      <button class="btn secondary" id="btn-cambiar-area" title="Cambia el texto del área">Cambiar área</button>
      <button class="btn secondary" id="btn-cambiar-resp" title="Define el responsable">Cambiar responsable</button>
    </div>

    <!-- Contenido base para continuar la app -->
    <section class="card">
      <h2 style="margin:0 0 8px 0">Bienvenido</h2>
      <p class="muted">Este es el esqueleto inicial de la aplicación. El encabezado muestra el logo, la fecha y hora actuales en la zona horaria de Guatemala, el nombre del área, además del ingenio, ubicación y responsable. Desde aquí iremos agregando módulos (registros, buscadores, reportes, etc.).</p>
    </section>
  </div>

  <script>
    const GT_TZ = 'America/Guatemala';
    function updateClock(){
      const now = new Date();
      const time = new Intl.DateTimeFormat('es-GT', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZone: GT_TZ }).format(now);
      const date = new Intl.DateTimeFormat('es-GT', { weekday: 'long', year: 'numeric', month: 'long', day: '2-digit', timeZone: GT_TZ }).format(now);
      document.getElementById('clock').textContent = time;
      document.getElementById('date').textContent = date.charAt(0).toUpperCase() + date.slice(1);
    }
    updateClock();
    setInterval(updateClock, 1000);

    document.getElementById('btn-imprimir').addEventListener('click', () => window.print());
    document.getElementById('btn-cambiar-area').addEventListener('click', () => {
      const current = document.querySelector('.area div').textContent.trim();
      const next = prompt('Escribe el nombre del área:', current);
      if(next && next.trim()){
        document.querySelector('.area div').textContent = next.trim();
        document.title = `Pantaleon · ${next.trim()}`;
      }
    });

    function getParam(name){
      const p = new URLSearchParams(window.location.search);
      return p.get(name);
    }

    const responsableEl = document.getElementById('responsable');
    function askResponsable(pref=''){
      const name = prompt('Escribe el nombre del responsable:', pref || responsableEl.textContent.replace('(definir)','').trim());
      if(name && name.trim()){
        responsableEl.textContent = name.trim();
        localStorage.setItem('pant_responsable', name.trim());
      }
    }
    const savedResp = localStorage.getItem('pant_responsable');
    const qpResp = getParam('responsable');
    if(qpResp){
      responsableEl.textContent = qpResp;
      localStorage.setItem('pant_responsable', qpResp);
    } else if(savedResp){
      responsableEl.textContent = savedResp;
    } else {
      askResponsable('');
    }
    const btnResp = document.getElementById('btn-cambiar-resp');
    if(btnResp){ btnResp.addEventListener('click', () => askResponsable('')); }

    const ingenioEl = document.getElementById('ingenio');
    const ubicEl = document.getElementById('ubicacion');
    const qpIng = getParam('ingenio');
    const qpUbi = getParam('ubicacion');
    if(qpIng){ ingenioEl.textContent = qpIng; }
    if(qpUbi){ ubicEl.textContent = qpUbi; }
  </script>
</body>
</html>
